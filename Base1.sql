--ESTO ES UN COMENTARIOS

--DDL (DATA DEFINITION LANGUAJE)
--DML (DATA MANIPULATION LANGUAJE)

-- TABLA : CONJUNTO DE DATOS CON UNA SEMANTICA(CONEXION)EN COMUN

CREATE TABLE MEDICAMENTOS (
MEDICAMENTO_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
NOMBRE NVARCHAR2(255),
DESCRIPCION NVARCHAR2(255),
PRECIO NUMBER(5,2),
FECHA_INVENTARIO DATE,
RESTRINGIDO CHAR(1),
TIPO NVARCHAR2(255)
);

DESCRIBE MEDICAMENTOS;

--AGREGAR UNA COLUMNA A UNA TABLA EXISTENTE
ALTER TABLE MEDICAMENTOS ADD TIPO NVARCHAR2(255);
ALTER TABLE MEDICAMENTOS ADD NUM_SERIE NVARCHAR2(255);
--BORRAR UNA COLUMNA DE UNA TABLA EXISTENTE
ALTER TABLE MEDICAMENTOS DROP COLUMN TIPO;
--CAMBIAR EL TIPO DE DATO DE UNA COLUMNA
ALTER TABLE MEDICAMENTOS MODIFY TIPO NUMBER;
--CAMBIAR EL NOMBRE DE UNA COLUMNA
ALTER TABLE MEDICAMENTOS RENAME COLUMN RESTRINGIDO TO CONTROLADO;
--BORRAR LA TABLA, VACIAR LA TABLA 
DROP TABLE MEDICAMENTOS;
--VACIA LA INFORMACION ,MANTIENE LA ESTRUCTURA
TRUNCATE TABLE MEDICAMENTOS;


--AGREGAR UNA RESTRICCION PARA QUE SOLO PERMITA CIERTOS VALORES
ALTER TABLE MEDICAMENTOS ADD CONSTRAINT CHK_MEDICAMENTOS_CONTROLADO
CHECK(CONTROLADO IN('Y','N'));

--ELIMINAR UN CONTRAINT EN UNA TABLA 
ALTER TABLE MEDICAMENTOS DROP CONSTRAINT CHK_MEDICAMENTOS_CONTROLADO;

--AGREGAR UNA RESTRICCION PARA QUE NO SE DUPLIQUE DATOS EN UNA COLUMNA
--(SIN SER UNA PK)
ALTER TABLE MEDICAMENTOS ADD CONSTRAINT UQ_MEDICAMENTOS_NUM_SERIE
UNIQUE(NUM_SERIE);

--INSERTAR EN LA TABLA 
INSERT INTO MEDICAMENTOS(NOMBRE,DESCRIPCION,PRECIO,FECHA_INVENTARIO,CONTROLADO,TIPO,NUM_SERIE)
VALUES('PARACETAMOL','PASTILLAS PAL DOLOR',99.99,'26/03/2009','N',1,'0000100');
INSERT INTO MEDICAMENTOS(NOMBRE,DESCRIPCION,PRECIO,FECHA_INVENTARIO,CONTROLADO,TIPO,NUM_SERIE)
VALUES('AGRIFEL','TABLETAS',200.99,'11/06/2001','N',3,'0000200');
INSERT INTO MEDICAMENTOS(NOMBRE,DESCRIPCION,PRECIO,FECHA_INVENTARIO,CONTROLADO,TIPO,NUM_SERIE)
VALUES('IBUPROFENO','PASTILLAS',160.99,'17/12/2009','N',2,'0000300');
INSERT INTO MEDICAMENTOS(NOMBRE,DESCRIPCION,PRECIO,FECHA_INVENTARIO,CONTROLADO,TIPO,NUM_SERIE)
VALUES('NAPROXENO','INYECCIONES',50.99,'28/09/2021','N',1,'0000400');
INSERT INTO MEDICAMENTOS(NOMBRE,DESCRIPCION,PRECIO,FECHA_INVENTARIO,CONTROLADO,TIPO,NUM_SERIE)
VALUES('DICLOFENACO','GOTAS',500.99,'14/03/2009','N',2,'0000500');

SELECT * FROM MEDICAMENTOS; --COLSULTAR DATOS DE LA TABLA
SELECT * FROM TIPO;
COMMIT;
ROLLBACK;
--ELIMINAR A NIVEL FILA 
DELETE FROM MEDICAMENTOS WHERE MEDICAMENTO_ID > 21;

CREATE TABLE TIPO(
TIPO_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
DESCRIPCION NVARCHAR2(255)
);
ALTER TABLE MEDICAMENTOS ADD CONSTRAINT FK_MEDICAMENTOS_TIPO_ID
FOREIGN KEY(TIPO) --QUIEN RECIBE EL DATO 
REFERENCES TIPO(TIPO_ID); --DE DONDE VIENE EL DATO 

INSERT INTO TIPO(DESCRIPCION)VALUES('GENERICO');
INSERT INTO TIPO(DESCRIPCION)VALUES('PATENTE');
INSERT INTO TIPO(DESCRIPCION)VALUES('HIBRIDO');