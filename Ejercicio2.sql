CREATE TABLE BARCO(
ID_BARCO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
MATRICULA NVARCHAR2 (255),
NOMBRE NVARCHAR2(255),
NUM_HAMARRE NVARCHAR2(255),
CUOTA NUMBER (10,2)
);
ALTER TABLE BARCO ADD CONSTRAINT UQ_MATRICULA
UNIQUE(MATRICULA);
ALTER TABLE BARCO ADD CONSTRAINT UQ_NOMBRE
UNIQUE(NOMBRE);

CREATE TABLE SALIDAS(
ID_SALIDAS NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
FECHA_HORA DATE,
DESTINO NVARCHAR2(255),
BARCO_ID NUMBER,
PERSONA_ID NUMBER
);

CREATE TABLE PERSONAS(
ID_PERSONA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
NOMBRE NVARCHAR2(255),
DIRECCION NVARCHAR2(255),
ROLL_ID NUMBER
);

CREATE TABLE PERSONA_BARCO(
ID_PERSBARCO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
PERSONA_ID NUMBER,
BARCO_ID NUMBER
);

CREATE TABLE ROLL(
ID_ROLL NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
DESCRIPCION NVARCHAR2(255)
); 

ALTER TABLE SALIDAS ADD CONSTRAINT FK_BARCO_ID
FOREIGN KEY(BARCO_ID) --QUIEN RECIBE EL DATO 
REFERENCES BARCO(ID_BARCO); --DE DONDE VIENE EL DATO 

ALTER TABLE PERSONA_BARCO ADD CONSTRAINT FK_BARCO_ID2
FOREIGN KEY(BARCO_ID)
REFERENCES BARCO(ID_BARCO);

ALTER TABLE SALIDAS ADD CONSTRAINT FK_PERSONA_ID
FOREIGN KEY(PERSONA_ID)
REFERENCES PERSONAS(ID_PERSONA);

ALTER TABLE PERSONA_BARCO ADD CONSTRAINT FK_PERSONA_ID2
FOREIGN KEY(PERSONA_ID)
REFERENCES PERSONAS(ID_PERSONA);

ALTER TABLE PERSONAS ADD CONSTRAINT FK_ROLL_ID
FOREIGN KEY(ROLL_ID)
REFERENCES ROLL(ID_ROLL);

SELECT *FROM ROLL;
INSERT INTO ROLL(DESCRIPCION)
VALUES('SOCIO');
INSERT INTO ROLL(DESCRIPCION)
VALUES('PATRON');
INSERT INTO ROLL(DESCRIPCION)
VALUES('EXTERNO');
INSERT INTO ROLL(DESCRIPCION)
VALUES('INVITADO');

DESCRIBE BARCO;
INSERT INTO BARCO(MATRICULA,NOMBRE,NUM_HAMARRE,CUOTA) 
VALUES('#1','LA SIRENITA','#18',999.99);
INSERT INTO BARCO(MATRICULA,NOMBRE,NUM_HAMARRE,CUOTA) 
VALUES('#2','LOBO DE MAR','#40',500.99);
INSERT INTO BARCO(MATRICULA,NOMBRE,NUM_HAMARRE,CUOTA) 
VALUES('#3','MAQUINA DEL MAL','#90',3000.50);
INSERT INTO BARCO(MATRICULA,NOMBRE,NUM_HAMARRE,CUOTA) 
VALUES('#4','EL TODAS MIAS','#20',560.99);
INSERT INTO BARCO(MATRICULA,NOMBRE,NUM_HAMARRE,CUOTA) 
VALUES('#5','CETEQ 69','#17',4690.99);

DESCRIBE PERSONAS;
INSERT INTO PERSONAS(NOMBRE,DIRECCION,ROLL_ID) 
VALUES('PEDRO PRIMERO','AV.DOCTOR',1);

INSERT INTO PERSONAS(NOMBRE,DIRECCION,ROLL_ID) 
VALUES('JUAN V','AV.UNO',2);

INSERT INTO PERSONAS(NOMBRE,DIRECCION,ROLL_ID) 
VALUES('MANUEL SURITA','AV.DOS',3);

INSERT INTO PERSONA_BARCO(PERSONA_ID,BARCO_ID)
VALUES(1,1);
INSERT INTO PERSONA_BARCO(PERSONA_ID,BARCO_ID)
VALUES(1,2);
INSERT INTO PERSONA_BARCO(PERSONA_ID,BARCO_ID)
VALUES(2,3);
INSERT INTO PERSONA_BARCO(PERSONA_ID,BARCO_ID)
VALUES(2,4);
INSERT INTO PERSONA_BARCO(PERSONA_ID,BARCO_ID)
VALUES(2,5);

SELECT *FROM BARCO;
SELECT *FROM PERSONAS;
SELECT *FROM SALIDAS;
DESCRIBE SALIDAS;
INSERT INTO SALIDAS(FECHA_HORA,DESTINO,BARCO_ID,PERSONA_ID) 
VALUES(TO_DATE('20-03-2020 08:45:40','DD/MM/YYYY HH24:MI:SS'),'TRES MARES',1,3);
INSERT INTO SALIDAS(FECHA_HORA,DESTINO,BARCO_ID,PERSONA_ID) 
VALUES(TO_DATE('20/03/2024 10:45:40','DD/MM/YYYY HH24:MI:SS'),'TRES MARES',1,2);
